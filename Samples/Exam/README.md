# 刷题系统

基于PHP + MariaDB的在线刷题系统

## 功能特性

### 后台管理
- 管理员登录（前后台Session分离，互不影响）
- 科目管理（添加、编辑、删除，支持分页显示，默认每页50条）
- 题库管理（添加、编辑、删除、批量删除，支持按科目和关键词筛选，分页显示）
- Excel题库导入（支持xls/xlsx/csv格式）
- 考试管理（创建试卷、编辑、暂停/恢复、删除，支持时间窗口和班级分配，分页显示）
- 学生管理（添加、编辑、删除、批量操作、Excel导入，支持搜索筛选，分页显示）
- 学生刷题记录（查看学生考试记录，按科目统计覆盖率，分页显示）
- 学生刷题列表（按学生-科目维度显示刷题情况，支持筛选排序，分页显示）
- 参数设置（题目数量、显示答案、学生发呆提醒时间等）
- 操作日志（记录所有管理员操作，支持多条件筛选，分页显示）

### 前台功能
- 学生登录（输入学号，动态标题"刷啊刷刷个XXX"）
- 试卷列表（科目显示在顶部，支持班级匹配，显示时间窗口和状态）
- 在线答题（倒计时、自动保存、防复制、错误提示、无活动提醒）
- 考试结果查看（得分、正确率、详细解析）
- 历史记录（查看所有考试记录，显示各科目覆盖率）
- 错题本（自动收集、按科目筛选查看、删除）

## 安装步骤

### 1. 数据库配置
- 导入 `database.sql` 到MariaDB数据库
- 修改 `inc/db.inc.php` 中的数据库连接信息（已配置为提供的测试数据库）

### 2. 安装依赖
```bash
composer install
```

### 3. 文件权限
确保以下目录可写：
- `uploads/` - 用于临时存储上传的Excel文件

### 4. 初始管理员账号
- 用户名：Admin
- 密码：请运行 `php init_admin.php` 初始化或查看安装文档

## Excel导入格式

Excel文件应包含以下列（按顺序）：
1. 题目类型
2. 大题题干
3. 正确答案
4. 答案解析
5. 知识点
6. 选项A
7. 选项B
8. 选项C
9. 选项D

第一行为表头，将从第二行开始读取数据。

## 目录结构

```
Exam/
├── admin/              # 后台管理
│   ├── css/           # 后台样式
│   ├── login.php      # 管理员登录
│   ├── index.php      # 后台首页
│   ├── subjects.php   # 科目管理
│   ├── questions.php  # 题库管理
│   ├── import.php     # 导入题库
│   ├── papers.php     # 组卷管理
│   └── settings.php   # 参数设置
├── inc/               # 公共文件
│   ├── db.inc.php     # 数据库配置
│   └── functions.inc.php  # 通用函数
├── css/               # 前台样式
├── index.php          # 前台首页（学生登录）
├── exam_list.php      # 试卷列表
├── exam.php           # 答题页面
├── exam_result.php    # 考试结果
├── records.php        # 历史记录
├── wrong_questions.php # 错题本
├── database.sql       # 数据库结构
└── composer.json      # Composer依赖
```

## 数据库信息

请根据实际环境配置数据库连接信息，编辑 `inc/db.inc.php` 文件。

## 主要特性

1. **分页显示**：所有后台管理页面支持分页（20/50/100/全部），默认每页50条，提升大数据量下的浏览体验
2. **Session分离**：前后台使用独立的session机制，互不影响，提升安全性
3. **智能抽题**：系统优先抽取学生未做过的题目，提升刷题覆盖率
4. **覆盖率统计**：实时统计学生各科目的刷题覆盖率，只统计当前题库中存在的题目，避免超过100%
5. **操作日志**：详细记录所有管理员操作，支持多条件筛选查询
6. **时间控制**：支持设置考试起止时间和暂停状态，精确控制考试开放时间
7. **班级分配**：试卷可分配给特定班级，学生只看到匹配的试卷

## 注意事项

1. 确保PHP版本 >= 7.4
2. 需要安装PhpSpreadsheet库用于Excel解析（通过Composer安装）
3. 答题时系统会自动保存答案，即使刷新页面也不会丢失
4. 错题会自动收集到错题本中
5. 考试结果页面可根据系统设置选择是否显示答案解析
6. 前后台Session独立，前台退出不会影响后台登录状态
7. 建议使用Chrome/Edge最新版浏览器，获得最佳体验
8. 系统会自动备份网站和数据库，保留最近7天的备份

